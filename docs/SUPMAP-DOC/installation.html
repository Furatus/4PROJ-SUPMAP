<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-05-11T14:09:42.7947672"><title>Installation / D&eacute;ploiement | 4PROJ-DOC</title><script type="application/json" id="virtual-toc-data">[{"id":"serveur-web-frontend","level":0,"title":"Serveur Web (frontend)","anchor":"#serveur-web-frontend"},{"id":"serveur-api-backend","level":0,"title":"Serveur API (backend)","anchor":"#serveur-api-backend"},{"id":"serveur-graphhopper","level":0,"title":"Serveur Graphhopper","anchor":"#serveur-graphhopper"},{"id":"serveur-documentation","level":0,"title":"Serveur Documentation","anchor":"#serveur-documentation"},{"id":"application-mobile","level":0,"title":"Application Mobile","anchor":"#application-mobile"},{"id":"docker-compose","level":0,"title":"Docker compose","anchor":"#docker-compose"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Installation / D&eacute;ploiement | 4PROJ-DOC"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="4PROJ-DOC Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/installation.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Installation / D&eacute;ploiement | 4PROJ-DOC"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/installation.html#webpage",
    "url": "writerside-documentation/installation.html",
    "name": "Installation / D&eacute;ploiement | 4PROJ-DOC",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "4PROJ-DOC Help"
}</script><!-- End Schema.org --></head><body data-id="Installation" data-main-title="Installation / Déploiement" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>4PROJ-DOC  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Installation" id="Installation.md">Installation / Déploiement</h1><p id="z1895yf_3">Cette section d&eacute;crit les &eacute;tapes n&eacute;cessaires pour installer et d&eacute;ployer l'application SUPMAP sur une machine locale. Elle couvre les pr&eacute;requis, la configuration de l'environnement, et les instructions sp&eacute;cifiques pour chaque composant de l'application.</p><p id="z1895yf_4">Cette page sera d&eacute;coup&eacute;e en deux types principaux (en fonction de la nature de l'installation):</p><ul class="list _bullet" id="z1895yf_5"><li class="list__item" id="z1895yf_14"><p id="z1895yf_16">Docker compose, Dockerfiles et Server side</p></li><li class="list__item" id="z1895yf_15"><p id="z1895yf_17">build et d&eacute;ploiement de l'application mobile</p></li></ul><p id="z1895yf_6">Le fichier docker compose fera l'objet d'une section &agrave; part enti&egrave;re.</p><aside class="prompt" data-type="tip" data-title="" id="z1895yf_7"><p>Tous les fichiers <code class="code" id="z1895yf_18">.env</code> et le fichier <code class="code" id="z1895yf_19">local.properties</code> viennent avec un exemple de configuration, dans les r&eacute;pertoires correspondants.</p></aside><section class="chapter"><h2 id="serveur-web-frontend" data-toc="serveur-web-frontend">Serveur Web (frontend)</h2><aside class="prompt" data-type="note" data-title="" id="z1895yf_20"><p>type : Docker compose</p></aside><p id="z1895yf_21">Le serveur web est d&eacute;velopp&eacute; avec Vite et React. Il suffit de lancer le fichier docker compose pour d&eacute;marrer le serveur.</p><section class="chapter"><h3 id="variables-d-environnement_webserver" data-toc="variables-d-environnement_webserver">Variables d'environnement</h3><aside class="prompt" data-type="warning" data-title="" id="z1895yf_23"><p><b id="z1895yf_27">V&eacute;rifiez la configutation de votre fichier .env avant de lancer le docker compose.</b></p><p id="z1895yf_28">le fichier .env du serveur web doit se trouver &agrave; la racine du dossier web : <code class="code" id="z1895yf_29">./web/</code>.</p></aside><p id="z1895yf_24">Liste des variables d'environnement :</p><div class="code-block" data-lang="bash">
VITE_GOOGLE_MAPS_API_KEY= &lt;YOUR_GOOGLE_MAPS_API_KEY&gt;
VITE_API_GRAPHHOPPER_URL= http:&lt;IP of Server running the graphhopper&gt;//:8989 # Uniquement si le serveur Graphhopper est lancé dans le même docker compose
VITE_API_SERVER_URL=http://&lt;IP of Server running the api&gt;:3000/api # Même raisonnement ici
VITE_GOOGLE_CLIENT_ID= &lt;YOUR_GOOGLE_CLIENT_ID&gt;
</div><aside class="prompt" data-type="warning" data-title="" id="z1895yf_26"><p><b id="z1895yf_30">Tr&egrave;s important : le serveur n&eacute;cessite l'utilisation de cl&eacute;s ssl pour se lancer. si les cl&eacute;s ssl sont manquantes &agrave; l'adresse <code class="code" id="z1895yf_32">./web/sslcerts</code> (voir le readme directement dans le dossier), le serveur refusera cat&eacute;goriquement de se lancer. Les cl&eacute;s ssl doivent &ecirc;tre au format PEM et doivent &ecirc;tre nomm&eacute;es web-server.key et web-server.crt.</b></p><p id="z1895yf_31"><span class="emphasis" id="z1895yf_33">Vous pouvez g&eacute;n&eacute;rer des cl&eacute;s ssl auto-sign&eacute;es avec openssl, ou utiliser un certificat ssl valide. (au format &quot;KEY,CRT&quot;)</span></p></aside></section></section><section class="chapter"><h2 id="serveur-api-backend" data-toc="serveur-api-backend">Serveur API (backend)</h2><aside class="prompt" data-type="note" data-title="" id="z1895yf_34"><p>type : Docker compose</p></aside><p id="z1895yf_35">Le serveur API est d&eacute;velopp&eacute; avec Node.js et Express. Il suffit de lancer le fichier docker compose pour d&eacute;marrer le serveur.</p><section class="chapter"><h3 id="variables-d-environnement_api" data-toc="variables-d-environnement_api">Variables d'environnement</h3><aside class="prompt" data-type="warning" data-title="" id="z1895yf_37"><p><b id="z1895yf_41">V&eacute;rifiez la configutation de votre fichier .env avant de lancer le docker compose.</b> le fichier .env du serveur API doit se trouver &agrave; la racine du dossier api : <code class="code" id="z1895yf_42">./api/</code>.</p></aside><p id="z1895yf_38">Liste des variables d'environnement :</p><div class="code-block" data-lang="bash">
MONGO_URI = &quot;mongodb://&lt;root_user&gt;:&lt;password&gt;@supmap-db:27017/&quot; # User et password définis dans le .env de la racine, avec le docker compose. l'adresse utilisée est uniquement valide dans le docker compose
JWT_SECRET = &lt;YOUR_JWT_SECRET&gt; # Secret utilisé pour signer les tokens JWT
HTTP_PORT = 3080 # Port HTTP du serveur API, Il est recommandé de ne pas le changer, surtout si vous utilisez le docker compose
HTTPS_PORT = 3000 # Port HTTPS du serveur API, Il est recommandé de ne pas le changer, surtout si vous utilisez le docker compose
GOOGLE_WEB_CLIENT_ID= &lt;YOUR_GOOGLE_WEB_CLIENT_ID&gt;
GOOGLE_ANDROID_CLIENT_ID= &lt;YOUR_GOOGLE_ANDROID_CLIENT_ID&gt;
GRAPHHOPPER_URL = &quot;http://graphhopper:8989&quot; # Adresse du serveur Graphhopper, uniquement valide dans le docker compose
</div><aside class="prompt" data-type="warning" data-title="" id="z1895yf_40"><p><b id="z1895yf_43">Tr&egrave;s important : le serveur n&eacute;cessite l'utilisation de cl&eacute;s ssl pour se lancer. si les cl&eacute;s ssl sont manquantes &agrave; l'adresse <code class="code" id="z1895yf_45">./api/sslcerts</code> (voir le readme directement dans le dossier), le serveur refusera cat&eacute;goriquement de se lancer. Les cl&eacute;s ssl doivent &ecirc;tre au format PEM et doivent &ecirc;tre nomm&eacute;es api-server.key et api-server.crt.</b></p><p id="z1895yf_44"><span class="emphasis" id="z1895yf_46">Vous pouvez g&eacute;n&eacute;rer des cl&eacute;s ssl auto-sign&eacute;es avec openssl, ou utiliser un certificat ssl valide. (au format &quot;KEY,CRT&quot;)</span></p></aside></section></section><section class="chapter"><h2 id="serveur-graphhopper" data-toc="serveur-graphhopper">Serveur Graphhopper</h2><aside class="prompt" data-type="note" data-title="" id="z1895yf_47"><p>type : Docker compose</p></aside><p id="z1895yf_48">Le serveur Graphhopper utilise directement l'image dockerhub oficielle de Graphhopper. Il suffit de lancer le fichier docker compose pour d&eacute;marrer le serveur.</p><p id="z1895yf_49">Nous effectuons tous les t&eacute;l&eacute;chargements et configurations n&eacute;cessaires &agrave; son fonctionnement dans le docker compose.</p><aside class="prompt" data-type="tip" data-title="" id="z1895yf_50"><p><b id="z1895yf_52">Le conteneur graphhopper demande beaucoup de temps pour se build, il est donc important d'&ecirc;tre <u id="z1895yf_53">patient</u> et de <u id="z1895yf_54">manipuler ses donn&eacute;es et volumes avec pr&eacute;caution</u>.</b></p></aside><aside class="prompt" data-type="note" data-title="" id="z1895yf_51"><p>Ce conteneur ne poss&egrave;de pas de variables d'environnement, simplement un fichier de configuration pr&eacute;configur&eacute; &agrave; l'adresse <code class="code" id="z1895yf_55">./graphhopper/config/graphhopper-config.yml</code>. <u id="z1895yf_56">Il est fortement d&eacute;conseill&eacute; de le modifier.</u></p></aside></section><section class="chapter"><h2 id="serveur-documentation" data-toc="serveur-documentation">Serveur Documentation</h2><aside class="prompt" data-type="note" data-title="" id="z1895yf_57"><p>type : Docker compose</p></aside><p id="z1895yf_58">Le serveur de documentation (Peut-&ecirc;tre la page sur laquelle vous vous trouvez) est d&eacute;velopp&eacute; avec Writerside (et d&eacute;livr&eacute; avec nginx). Il suffit de lancer le fichier docker compose pour d&eacute;marrer le serveur.</p><aside class="prompt" data-type="tip" data-title="" id="z1895yf_59"><p>Pas de variables d'environnement sur ce serveur</p></aside></section><section class="chapter"><h2 id="application-mobile" data-toc="application-mobile">Application Mobile</h2><aside class="prompt" data-type="note" data-title="" id="z1895yf_60"><p>type : Flutter</p></aside><p id="z1895yf_61">L'application mobile est d&eacute;velopp&eacute;e avec Flutter.</p><section class="chapter"><h3 id="pr-requis" data-toc="pr-requis">Pr&eacute;requis</h3><ul class="list _bullet" id="z1895yf_64"><li class="list__item" id="z1895yf_66"><p id="z1895yf_69">Flutter SDK install&eacute; sur votre machine</p></li><li class="list__item" id="z1895yf_67"><p id="z1895yf_70">Android Studio ou Visual studio code pour la compilation mobile.</p></li><li class="list__item" id="z1895yf_68"><p id="z1895yf_71">Un &eacute;mulateur Android ou un appareil physique pour tester l'application</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="z1895yf_65"><p>Pour installer Flutter, suivez les instructions sur le site officiel de Flutter : <a href="https://flutter.dev/docs/get-started/install" id="z1895yf_72" data-external="true" rel="noopener noreferrer" target="_blank">Guide d'installation de Flutter</a></p></aside></section><section class="chapter"><h3 id="variables-d-environnement" data-toc="variables-d-environnement">Variables d'environnement</h3><p id="z1895yf_73">Liste des variables d'environnement :</p><p id="z1895yf_74">fichier .env : <code class="code" id="z1895yf_80">./flutter/.env</code></p><div class="code-block" data-lang="bash">
GOOGLE_MAPS_API_KEY= &lt;YOUR_GOOGLE_MAPS_API_KEY&gt;
SERVER_API_URL=https://&lt;IP of Server running the api&gt;:3000/api # Si le docker compose est lancé, utilisez l'adresse ip de la machine hôte
WEB_SOCKET_URL=wss://&lt;IP of Server running the api&gt;:3000 # Même raisonnement ici
GRAPHHOPPER_API_URL= http://&lt;IP of Server running Graphhopper&gt;:8989 # Même raisonnement ici
GOOGLE_ANDROID_CLIENT_ID= &lt;YOUR_GOOGLE_ANDROID_CLIENT_ID&gt; 
</div><p id="z1895yf_76">fichier local.properties (&agrave; ajouter aux cl&eacute;s d&eacute;j&agrave; existantes) : <code class="code" id="z1895yf_81">./flutter/android/local.properties</code></p><div class="code-block" data-lang="bash">
GoogleMapsApiKey=&lt;YOUR_GOOGLE_MAPS_API_KEY&gt; # Même clé que dans le fichier .env
</div><aside class="prompt" data-type="tip" data-title="" id="z1895yf_78"><p>Veillez bien &agrave; ouvrir les diff&eacute;rents ports sur votre pare-feu (3000, 3080, 8989) pour permettre la communication entre l'application mobile et le Serveur.</p></aside><section class="procedure-steps"><h3 id="installation-application-mobile" data-toc="installation-application-mobile">Compilation et installation de l'application mobile</h3><ol class="list _decimal"><li class="list__item" id="z1895yf_82"><p>Ouvrez un terminal &agrave; la racine du projet et naviguez jusqu'au r&eacute;pertoire de l'application mobile. </p><div class="code-block" data-lang="bash">
cd ./flutter/
</div></li><li class="list__item" id="z1895yf_83"><p>Ensuite, ex&eacute;cutez la commande suivante pour installer les d&eacute;pendances du projet (si elles ne sont pas d&eacute;j&agrave; inclues): </p><div class="code-block" data-lang="bash">
flutter pub get
</div></li><li class="list__item" id="z1895yf_84"><p>V&eacute;rifiez que le contenu de vos fichiers .env et local.properties (<code class="code" id="z1895yf_90">./flutter/.env</code> et <code class="code" id="z1895yf_91">./flutter/android/local.properties</code>) soient corrects. Voir la section pr&eacute;c&eacute;dente pour le d&eacute;tail sur les variables d'environnement.</p></li><li class="list__item" id="z1895yf_85"><p>Compilez l'application pour Android en utilisant la commande suivante : </p><div class="code-block" data-lang="bash">
flutter build apk --release
</div></li><li class="list__item" id="z1895yf_86"><p>Une fois la compilation termin&eacute;e, vous trouverez le fichier APK dans le r&eacute;pertoire <code class="code" id="z1895yf_93">./flutter/build/app/outputs/flutter-apk/</code>. Vous pouvez l'installer sur un appareil Android en le transf&eacute;rant et en l'installant manuellement si vous avez un appareil physique &agrave; disposition, pensez &agrave; activer l'option d'installation par apk, si ce n'est pas d&eacute;j&agrave; le cas.</p></li><li class="list__item" id="z1895yf_87"><p>Si vous pr&eacute;f&eacute;rez utiliser un &eacute;mulateur Android, il est fortement conseill&eacute; d'utiliser Android Studio pour le lancer depuis ADB/AVD. Flutter/Android Studio vous proposera directement de lancer l'application sur vos appareils disponibles. </p><aside class="prompt" data-type="warning" data-title="" id="z1895yf_94"><p>Cette m&eacute;thode est plus difficile.</p></aside></li></ol></section></section></section><section class="chapter"><h2 id="docker-compose" data-toc="docker-compose">Docker compose</h2><aside class="prompt" data-type="note" data-title="" id="z1895yf_95"><p>type : Docker compose</p></aside><p> Le fichier docker compose est situ&eacute; &agrave; la racine du projet. Il permet de lancer tous les services n&eacute;cessaires au bon fonctionnement de l'application. Il est configur&eacute; pour utiliser les images officielles de MongoDB, Graphhopper, Node et Nginx. Il est &eacute;galement configur&eacute; pour utiliser les Dockerfiles du serveur API, du serveur Web et du Serveur Nginx pour la documentation. </p><aside class="prompt" data-type="tip" data-title="" id="z1895yf_96"><p><b id="z1895yf_98">Il est fortement recommand&eacute; de ne pas modifier le docker compose, sauf si vous savez ce que vous faites.</b></p></aside><section class="chapter"><h3 id="variables-d-environnement_docker-compose" data-toc="variables-d-environnement_docker-compose">Variables d'environnement</h3><p id="z1895yf_99">Le fichier Docker compose utilise uniquement les variables d'environnement pour mongodb. On retrouve donc les deux variables suivantes :</p><div class="code-block" data-lang="bash">
MONGO_ROOT_USER = &lt;YOUR_MONGO_ROOT_USER&gt;
MONGO_ROOT_PASSWORD = &lt;YOUR_MONGO_ROOT_PASSWORD&gt;
</div><aside class="prompt" data-type="tip" data-title="" id="z1895yf_101"><p><b id="z1895yf_104">Veillez &agrave; bien faire correspondre l'utilisateur et le mot de passe de MongoDB avec ceux utilis&eacute;s dans le serveur API. Sinon, l'api ne pourra pas d&eacute;marrer.</b></p></aside><aside class="prompt" data-type="note" data-title="" id="z1895yf_103"><p>Une copie de cette page sera export&eacute;e en fichier PDF pour permettre une lecture hors ligne, n&eacute;cessaire &agrave; la premi&egrave;re utilisation.</p></aside></section></section><div class="last-modified">11 mai 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="accueil.html" class="navigation-links__prev">Accueil</a><a href="application-mobile.html" class="navigation-links__next">Application Mobile</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>